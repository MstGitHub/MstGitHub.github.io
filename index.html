<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>涛</title>
</head>
<style type="text/css">
  body,div,p,ul,ol,li,dl,dt,dd,table,tr,td,form,hr,fieldset,h1,h2,h3,h4,h5,h6,img,input{
      margin:0;
      padding:0;
  }
  body{
      /* background: black; */
      display: flex;
      justify-content: center;
      align-items: center;
  }
  .content{
    display: flex;
    justify-content: space-around;
    width: 100%;
    flex-wrap: wrap;
  }
  #eoline-id1, #eoline-id2{
    width: 300px;
    height: 300px;
  }
  .eoline-result{
    border: 1px solid black;
    width: 600px;
    height: 300px;
    overflow: auto;
  }

  
  </style>
  </head>
<body >
    <div class="content">
        <div>处理eoline数据</div>
        <div>
            <div><label for="eoline-id1">eolink 预览数据 参数说明数据</label></div>
            <textarea type="text" id="eoline-id1" placeholder="请输入参数说明数据" >
                    
            </textarea>
        </div>
        <div> 
            <div><label for="eoline-id2">eolink 预览数据 随机数据数据</label></div>    
            <textarea type="text" id="eoline-id2" placeholder="请输入随机数据数据">
                    
            </textarea>
        </div>
        <div>
            <div><button id="eolink-btn1">确认</button><button id="eolink-btn2">复制输出结果</button> 输出结果: </div>
            <div class="eoline-result"></div>
        </div>
        <div>
            <button id="eolink-btn3">清空</button>
        </div>
    </div>
  <script>
      const eolinkId1 = document.documentElement.querySelector("#eoline-id1");
      const eolinkId2 = document.documentElement.querySelector("#eoline-id2");
      const eolinkBtn1 = document.documentElement.querySelector("#eolink-btn1");
      const eolinkResult = document.documentElement.querySelector(".eoline-result");
      const eolinkBtn2 = document.documentElement.querySelector("#eolink-btn2");
      const eolinkBtn3 = document.documentElement.querySelector("#eolink-btn3");


/** 
 *@param req1 为预览数据  参数说明 
* @param req2  为预览数据  随机数据
* */
handleData = (req1, req2) => {
    try {
    /** 处理键值对格式 */
    handleReq = (obj1, obj2, hasTab) => {
        let temps = ``;
        for (const key in obj1) {
        if (Array.isArray(obj2[key]) && obj2[key].length !== 0) {
            temps += `\n/** 详情 */\n${key}: {${handleReq(obj1[key][0], obj2[key][0], true)}\n}[];`;
        } else if (Array.isArray(obj2[key]) && obj2[key].length === 0) {
            temps += `\n/** ${obj1[key]} */\n${key}: [];`
        } else {
            if (hasTab) {
            temps += `\n  /** ${obj1[key]} */\n  ${key}: ${typeof obj2[key]};`
            } else {
            temps += `\n/** ${obj1[key]} */\n${key}: ${typeof obj2[key]};`
            }
        }
        }
        return temps;
    }
    let sumTemps = '';
    if (Array.isArray(req1)) {
    sumTemps += handleReq(req1[0], req2[0]);
    } else {
        sumTemps += handleReq(req1, req2)
    }
    return sumTemps;
} catch(err) {
    return "格式错误";
}
}

function copy(className){
      // 创建range对象
      let range = document.createRange();
      // 传入需要选中的节点
      range.selectNodeContents(document.querySelector(className));
      var selection = document.getSelection();
      // 清空选中的区域
      selection.removeAllRanges();
      // 添加选中区域
      selection.addRange(range);
      // 执行复制
      document.execCommand('Copy');
      alert("复制成功");
    }

      eolinkBtn1.onclick = () =>{
          const r1 = eolinkId1.value
          const r2 = eolinkId2.value
          let content = "";
          if (!r1 || !r2) {
            content = "不能为空"
          }
          const q1 = JSON.parse(r1);
          const q2 = JSON.parse(r2)
         content = handleData(q1.data.result, q2.data.result);
         console.log("结果为：", content)
         eolinkResult.innerText = content;
      }

      eolinkBtn2.onclick = () => {
        copy(".eoline-result")
      }

      eolinkBtn3.onclick = () => {
          eolinkId1.value = "";
          eolinkId2.value = ""
      }
  </script>
</body>

</html>